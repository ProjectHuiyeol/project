<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>HUIYEOL</title>
        <link rel="icon" type="image/x-icon" href="../static/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Google fonts-->
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&amp;display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&amp;display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&amp;display=swap" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="../static/assets/css/styles.css" rel="stylesheet" />
        <!-- <link href="css/dnd_style.css" rel="stylesheet" /> -->
    </head>
    <body class="pt-5"></body>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm" id="mainNav">
            <div class="container px-5">
                <a class="navbar-brand fw-bold"  href="{{url_for('mainlogo.main')}}">HUIYEOL</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="bi-list"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto me-4 my-3 my-lg-0">
                        <li class="nav-item"><a class="nav-link me-lg-3" href="../mainlogo/#about">Services</a></li>
                        <li class="nav-item"><a class="nav-link me-lg-3" href="../mainlogo/#function">About</a></li>
                    </ul>
                    <button class="btn btn-primary rounded-pill px-3 mb-2 mb-lg-0" data-bs-toggle="modal" data-bs-target="#feedbackModal">
                        <span class="d-flex align-items-center">
                            <i class="bi-chat-text-fill me-2"></i>
                            <span class="small">Contact</span>
                        </span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- ======= All music Section ======= -->
        <div class="container py-4" style = 'margin: auto;'>
            <!-- <header class="pb-3 mb-4 border-bottom" >
              <a href="/" class="d-flex align-items-center text-dark text-decoration-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" class="me-2" viewBox="0 0 118 94" role="img"><title>Bootstrap</title><path fill-rule="evenodd" clip-rule="evenodd" d="M24.509 0c-6.733 0-11.715 5.893-11.492 12.284.214 6.14-.064 14.092-2.066 20.577C8.943 39.365 5.547 43.485 0 44.014v5.972c5.547.529 8.943 4.649 10.951 11.153 2.002 6.485 2.28 14.437 2.066 20.577C12.794 88.106 17.776 94 24.51 94H93.5c6.733 0 11.714-5.893 11.491-12.284-.214-6.14.064-14.092 2.066-20.577 2.009-6.504 5.396-10.624 10.943-11.153v-5.972c-5.547-.529-8.934-4.649-10.943-11.153-2.002-6.484-2.28-14.437-2.066-20.577C105.214 5.894 100.233 0 93.5 0H24.508zM80 57.863C80 66.663 73.436 72 62.543 72H44a2 2 0 01-2-2V24a2 2 0 012-2h18.437c9.083 0 15.044 4.92 15.044 12.474 0 5.302-4.01 10.049-9.119 10.88v.277C75.317 46.394 80 51.21 80 57.863zM60.521 28.34H49.948v14.934h8.905c6.884 0 10.68-2.772 10.68-7.727 0-4.643-3.264-7.207-9.012-7.207zM49.948 49.2v16.458H60.91c7.167 0 10.964-2.876 10.964-8.281 0-5.406-3.903-8.178-11.425-8.178H49.948z" fill="currentColor"></path></svg>
                <span class="fs-4">Jumbotron example</span>
              </a>
            </header> -->
        
            <div class="p-5 mb-4 bg-light rounded-3" style="text-align: center;">
              <div class="container-fluid py-5">
                <h2 class="display-5 fw-bold">{{pl_name}}의 Playlist</h2>
                <div class="tracklist">
                    <table border = '1'>
                        <thead>
                            <tr>
                                <th scope="col" class="song">
                                    <span class="blind">곡명</span>
                                </th>
        
        
                                <th scope="col" class="lyrics">
                                    <span class="blind">가사</span>
                                </th>
        
                            </tr>
                        </thead>
                        <input type = "hidden" id = "song_custom_list_num" value ="{{song_custom_list|length}}">
                        <tbody>
                            {% for i, el in enumerate(song_custom_list) %}
                            <tr class="">
                                
                                <td class="song">
                                    <div class="title_badge_wrap">
                                        <span class="inner_cell">
        
                                    </div>
                                    <div title="OSHUN" class="artist_sub">
                                        <span>
                                            <span>
                                                {{el[0]}}
                                            </span>
                                        </span>
                                    </div>
                                </td>
                                <td id="lyrics">
                                <form target = "_blank" action = "{{url_for('main1.get_lyrics')}}" method = "GET">

                                    
                                    <input name = "custom_lyrics_id" id = "custom_lyrics_id" type = "hidden" value = "{{custom_lyrics[i]}}"/>
                                    <button type ="submit" class="btn_lyrics">가사 보기</button>
                                </form>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
              </div>
            </div>
        
            <div class="row align-items-md-stretch">
              <div class="col-md-12">
                <div class="h-100 p-5 bg-light border rounded-3">
                  <h2>플레이리스트 음원/가사 감정 그래프</h2>
                  <p>레이더 차트에 음원 감정 4분류, 가사 감정 6분류를 추론한 결과 값이 표시됩니다.</p>
                  <div class="tracklist" style="overflow: auto;">
                    <table style="overflow: auto; border: 1;">
                        <thead>
                            <tr>
                                <th scope="col" class="song">
                                    <span class="blind">음원</span>
                                </th>
                                <th scope="col" class="lyrics">
                                    <span class="blind">가사</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="">  
                                <td class="song">
                                    <div class="title_badge_wrap">
                                        <span class="inner_cell">
                                    </div>
                                    <div class="song_name">
                                        <div style = "width : 100%; height:100%">
                                            <!-- <div class="card-header">Radar chart</div>
                                            <div class="card-body" style="height: absolute"> -->
                                            <canvas id="radar-chart1" width="500%" height="500%" ></canvas>
                                        </div>
                                    </div>
                                </td>
                                <td class="lyrics">
                                    <div style = "width : 100%; height:100%">
                                        <!-- <div class="card-header">Radar chart</div>
                                        <div class="card-body" style="height: absolute"> -->
                                        <canvas id="radar-chart2" width="500%" height="500%" ></canvas>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
              </div>
                </div>
              </div>
                {% for i in range(4) %}
                    <input type = "hidden" id = "sound_sentiment{{i}}" value="{{ sound_sentiments[i] }}"></input>
                {% endfor %}
                {% for i in range(6) %}
                    <input type = "hidden" id = "lyrics_sentiment{{i}}" value="{{ lyrics_sentiments[i] }}"></input>
                {% endfor %}
        <div class="col-md-6" >
                <div class="h-100 p-5 border rounded-3" style="background-color: rgb({{playlist_color[1][0][0]}},{{playlist_color[1][0][1]}},{{playlist_color[1][0][2]}});">
                    <h2>플레이리스트 색</h2>
                    <div ><h3>{{playlist_color[0]}}</h3></div>
                  <p>{{playlist_color[2]}}</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="h-100 p-5 bg-light border rounded-3">
                  <h2>유사한 곡 추천</h2>
                  <p>플레이리스트의 곡들과 유사한 5곡들을 추천해드립니다.</p>
                  <button id="similary_song_find">유사 곡 찾기</button>
                </div>
              </div>
            </div>
          </div>
          <script type="text/template" id="similarlyIFrameTemplate">
            <div id="similarlyIFrame">
                <style>
                #similarlyIFrame { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: rgba(0, 0, 0, 0.7); backdrop-filter: blur(4px); }
                /* 이부분이없을시 밑으로 바로생김  중간으로 보내는 부분 */
                #similarlyIFrame .iframe-content { position: relative; width: 100%; height: 150%; max-width: 50%; max-height: 400px; background-color: #fff; box-shadow: 0 0 10px #333; }
                #similarlyIFrame iframe { width: 200%; height: 150%; }  
                /* 이거 두줄은 잘려서 나오는 부분 */
                #similarlyIFrame .close-btn { position: absolute; bottom: 100%; right: 0; font: inherit; border: none; padding: 5px 0; color: #fff; background-color: transparent; }
                /* 버튼위치 조절하는 부분 */
                </style>
                <div class="iframe-content">
                    <iframe src="{{url_for('main1.similary', check_fns=check_fns)}}" scrolling="no"></iframe>
                    <button class="close-btn">닫기</button>
                </div>
            </div>
          </script>
          <script>
            !function() {
                const similarlyBtn = document.querySelector('#similary_song_find');   //위에 button id부분
                const iframeTemplate = document.querySelector('#similarlyIFrameTemplate'); //템플레이트여는부분
                similarlyBtn.addEventListener('click', (event) => {
                    /*
                    event.stopPropagation(); 
                    // 다른 이벤트로 전이되지 않도록 제어

                    if (document.querySelector('#similarlyIFrame')) {
                        alert('현재 사용 중인 IFrame 입니다.');
                        return;
                    }
                    */
                    const parentNode = iframeTemplate.parentNode;
                    const template = document.createElement('template');
                    template.innerHTML = iframeTemplate.innerHTML;

                    const templateElement = template.content.children[0];

                    parentNode.appendChild(templateElement);
                    
                    
                    
                    // 닫기 부분
                    const closeBtn = templateElement.querySelector('.close-btn');
                    closeBtn.addEventListener('click', () => {
                        parentNode.removeChild(templateElement);
                    });
                });
            }();
          </script>
      <!-- End All music Section -->
    <script src="../static/assets/vendor/jquery/jquery.min.js"></script>
    <script src="../static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../static/assets/vendor/jquery.easing/jquery.easing.min.js"></script>
    <script src="../static/assets/vendor/php-email-form/validate.js"></script>
    <script src="../static/assets/vendor/jquery-sticky/jquery.sticky.js"></script>
    <script src="../static/assets/vendor/venobox/venobox.min.js"></script>
    <script src="../static/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="../static/assets/vendor/owl.carousel/owl.carousel.min.js"></script>
    <script src="../static/assets/vendor/aos/aos.js"></script>
    <!-- <script src="../static/assets/js/loading.js"></script> -->
    <!-- Template Main JS File -->
    <script src="../static/assets/js/main.js"></script>
    <script src="../static/assets/js/radar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script src="../static/assets/js/iframe.js"></script>
  </body>
</html>